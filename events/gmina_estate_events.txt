namespace = gmina_estates

province_event = {
	id = gmina_estates.1
	title = gmina_estates.1.title
	desc = gmina_estates.1.desc
	picture = MARCHING_PEASANTS_eventPicture
	
	is_triggered_only = yes
	
	option = {
		name = gmina_estates.1.a #Ok.
	}
}
country_event = {
	id = gmina_estates.2
	title = gmina_estates.2.title
	desc = gmina_estates.2.desc
	picture = ESTATEPICKERPicture
	
	is_triggered_only = yes
	
	#Miners can
	option = {
		name = gmina_estates.2.a1
		custom_tooltip = gmina_estates.2.a1.tt

		trigger = {

			AND = {

				OR = {
					NOT = { has_country_flag = has_estate_picked_flag }
					had_country_flag = {
						flag = has_estate_picked_flag
						days = 9125
					}
					
				}

				OR = {
					AND = {
						num_of_owned_provinces_with = {
							value = 5
							trade_goods = gu_coal 
						}
						NOT = {
							capital_scope = {
								OR = {
									region = dolnoslaskie_region
									region = opolskie_region
									region = slaskie_region
								}
							}
						}
					}
					AND = {
						NOT = {
							num_of_owned_provinces_with = {
								value = 5
								trade_goods = gu_coal
							}
						}
						capital_scope = {
							OR = {
								region = dolnoslaskie_region
								region = opolskie_region
								region = slaskie_region
							}
						}
					}
					AND = {
						num_of_owned_provinces_with = {
							value = 5
							trade_goods = gu_coal
						}
						capital_scope = {
							OR = {
								region = dolnoslaskie_region
								region = opolskie_region
								region = slaskie_region
							}
						}
					}
				}
			}


		}

		hidden_effect = {
			clr_country_flag = has_estate_picked_flag
			clr_country_flag = estate_picked_miners
			clr_country_flag = estate_picked_scientists
			clr_country_flag = estate_picked_farmers
			clr_country_flag = estate_picked_investors

			set_country_flag = estate_picked_miners
			set_country_flag = has_estate_picked_flag
		}

		hidden_effect = { country_event = { id = gmina_estates.2137 } }
	}
	#Miners can't
	option = {
		name = gmina_estates.2.a2
		custom_tooltip = gmina_estates.2.a2.tt
		trigger = {

			AND = {
				OR = {

					NOT = { 
						had_country_flag = {
							flag = has_estate_picked_flag
							days = 9125
						}
					}
	
					has_country_flag = has_estate_picked_flag 
	
				}
				OR = {
					OR = {
						NOT = { 
							num_of_owned_provinces_with = {
								value = 5
								trade_goods = gu_coal 
							}
						}
						NOT = {
							capital_scope = {
								OR = {
									region = dolnoslaskie_region
									region = opolskie_region
									region = slaskie_region
								}
							}
						}
						AND = {
							NOT = { 
								num_of_owned_provinces_with = {
									value = 5
									trade_goods = gu_coal 
								}
							}
							NOT = {
								capital_scope = {
									OR = {
										region = dolnoslaskie_region
										region = opolskie_region
										region = slaskie_region
									}
								}
							}
						}
					}
				
					has_country_flag = estate_picked_scientists
					has_country_flag = estate_picked_farmers
					has_country_flag = estate_picked_investors
			
				}

				NOT = {	has_country_flag = estate_picked_miners }
			}



		}

		hidden_effect = { country_event = { id = gmina_estates.2137 } }
		
	}
	#Miners can't 2
	option = {
		highlight = yes
		name = gmina_estates.2.a3
		custom_tooltip = gmina_estates.2.a2.tt
		trigger = {

			has_country_flag = estate_picked_miners

		}

		hidden_effect = { country_event = { id = gmina_estates.2137 } }
		
	}
	#Scientists can
	option = {
		name = gmina_estates.2.b1
		custom_tooltip = gmina_estates.2.b1.tt

		trigger = {
			
			AND = {

				AND = {
					innovativeness = 50
					NOT = { 
						religion_group = communism_group
					}
				}

				OR = {
					NOT = { has_country_flag = has_estate_picked_flag }
					had_country_flag = {
						flag = has_estate_picked_flag
						days = 9125
					
					}
				}
			}

		}
		hidden_effect = {
			clr_country_flag = has_estate_picked_flag
			clr_country_flag = estate_picked_miners
			clr_country_flag = estate_picked_scientists
			clr_country_flag = estate_picked_farmers
			clr_country_flag = estate_picked_investors

			set_country_flag = estate_picked_scientists
			set_country_flag = has_estate_picked_flag
		}

		hidden_effect = { country_event = { id = gmina_estates.2137 } }
	}
	#Scientists can't
	option = {
		name = gmina_estates.2.b2
		custom_tooltip = gmina_estates.2.b2.tt

		trigger = {

			AND = {

				OR = {

					NOT = { 
						had_country_flag = {
							flag = has_estate_picked_flag
							days = 9125
						}
					}
		
					has_country_flag = has_estate_picked_flag 
		
				}

				OR = {
					AND = {
						NOT = { innovativeness = 50 }
						religion_group = communism_group
					}
					AND = {
						NOT = { innovativeness = 50 }
						NOT = { religion_group = communism_group }
					}
					AND = {
						innovativeness = 50 
						religion_group = communism_group
					}
	
					has_country_flag = estate_picked_miners
					has_country_flag = estate_picked_farmers
					has_country_flag = estate_picked_investors
				}

				NOT = {	has_country_flag = estate_picked_scientists }

			}

		}

		hidden_effect = { country_event = { id = gmina_estates.2137 } }
	}
	#Scientists can't 2
	option = {
		highlight = yes
		name = gmina_estates.2.b3
		custom_tooltip = gmina_estates.2.b2.tt

		trigger = {

			has_country_flag = estate_picked_scientists

		}

		hidden_effect = { country_event = { id = gmina_estates.2137 } }
	}
	#Farmers can
	option = {
		name = gmina_estates.2.c1
		custom_tooltip = gmina_estates.2.c1.tt

		trigger = {

			AND = {

				OR = {
					NOT = { has_country_flag = has_estate_picked_flag }
					had_country_flag = {
						flag = has_estate_picked_flag
						days = 9125
					
					}
				}

				OR = {
					AND = {
						
						num_of_owned_provinces_with = {
							value = 5
							has_terrain = farmlands
						} 
						
						NOT = { religion_group = communism_group }
					}
					AND = {
						num_of_owned_provinces_with = {
							value = 10
							has_terrain = grasslands
						} 
					   NOT = { religion_group = communism_group }
					}
	
					capital_scope = {
						OR = {
							region = lubelskie_region
							region = wielkopolska_region
							region = kujawsko_pomorskie_region
						}
					}
				}
			}



		}

		hidden_effect = {
			clr_country_flag = has_estate_picked_flag
			clr_country_flag = estate_picked_miners
			clr_country_flag = estate_picked_scientists
			clr_country_flag = estate_picked_farmers
			clr_country_flag = estate_picked_investors

			set_country_flag = estate_picked_farmers
			set_country_flag = has_estate_picked_flag
		}

		hidden_effect = { country_event = { id = gmina_estates.2137 } }
	}
	#Farmers can't
	option = {
		name = gmina_estates.2.c2
		custom_tooltip = gmina_estates.2.c2.tt

		trigger = {

			AND = {

				OR = {

					NOT = { 
						had_country_flag = {
							flag = has_estate_picked_flag
							days = 9125
						}
					}
	
					has_country_flag = has_estate_picked_flag 
	
				}

				OR = {
					AND = {
						num_of_owned_provinces_with = {
							value = 5
							has_terrain = farmlands
						} 
						religion_group = communism_group
					}
					AND = {
						NOT = {
							num_of_owned_provinces_with = {
								value = 5
								has_terrain = farmlands
							} 
						}
						NOT = { religion_group = communism_group }
					}
					AND = {
						num_of_owned_provinces_with = {
							value = 10
							has_terrain = grasslands
						} 
						religion_group = communism_group
					}
					AND = {
						NOT = {
							num_of_owned_provinces_with = {
								value = 10
								has_terrain = grasslands
							} 
						}
						NOT = { religion_group = communism_group }
					}
					
					AND = {
						NOT = {
							capital_scope = {
								OR = {
									region = lubelskie_region
									region = wielkopolska_region
									region = kujawsko_pomorskie_region
								}
							}
						
							OR = {
								num_of_owned_provinces_with = {
									value = 10
									has_terrain = grasslands
								} 
								num_of_owned_provinces_with = {
									value = 5
									has_terrain = farmlands
								} 
							}
						
						}	
					}
					AND = {
	
						capital_scope = {
							OR = {
								region = lubelskie_region
								region = wielkopolska_region
								region = kujawsko_pomorskie_region
							}
						}
	
							NOT = {
								OR = {
									num_of_owned_provinces_with = {
										value = 10
										has_terrain = grasslands
									} 
									num_of_owned_provinces_with = {
										value = 5
										has_terrain = farmlands
									} 
	
									religion_group = communism_group
								}
							
							}	
					}
	
					has_country_flag = estate_picked_scientists
					has_country_flag = estate_picked_miners
					has_country_flag = estate_picked_investors
				}

				NOT = {	has_country_flag = estate_picked_farmers }

			}


		}

		hidden_effect = { country_event = { id = gmina_estates.2137 } }
	}
	#Farmers can't 2
	option = {
		highlight = yes
		name = gmina_estates.2.c3
		custom_tooltip = gmina_estates.2.c2.tt

		trigger = {
			has_country_flag = estate_picked_farmers 
		}

		hidden_effect = { country_event = { id = gmina_estates.2137 } }
	}
	#Investors can
	option = {
		name = gmina_estates.2.d1
		custom_tooltip = gmina_estates.2.d1.tt

		trigger = {

			AND = {

				OR = {
					NOT = { has_country_flag = has_estate_picked_flag }
					had_country_flag = {
						flag = has_estate_picked_flag
						days = 9125
					
					}
				}

				NOT = { religion_group = communism_group }
			
				OR = {
	
					colony = 1
					
					AND = {
						gu_finances = 1
						NOT = { current_age = age_of_discovery }
					}
		
					NOT = { 
						OR = {
							current_age = age_of_discovery
							current_age = age_of_reformation
						}
					}
		
				}

			}

		}

		hidden_effect = {
			clr_country_flag = has_estate_picked_flag
			clr_country_flag = estate_picked_miners
			clr_country_flag = estate_picked_scientists
			clr_country_flag = estate_picked_farmers
			clr_country_flag = estate_picked_investors
			
			set_country_flag = estate_picked_investors
			set_country_flag = has_estate_picked_flag
		}

		hidden_effect = { country_event = { id = gmina_estates.2137 } }
	}
	#Investors can't
	option = {
		name = gmina_estates.2.d2
		custom_tooltip = gmina_estates.2.d2.tt

		trigger = {
			
			OR = {
	
				NOT = { 
					had_country_flag = {
						flag = has_estate_picked_flag
						days = 9125
					}
				}
	
				has_country_flag = has_estate_picked_flag 
	
			}

			OR = {

				OR = {
					AND = {
						NOT = { gu_finances = 1 }
						current_age = age_of_discovery 
					}
					AND = {
						NOT = { gu_finances = 1 }
						NOT = { current_age = age_of_discovery }
					}
					AND = {
						gu_finances = 1
						current_age = age_of_discovery 
					}

					AND = {
						NOT = { colony = 1 }
						NOT = { gu_finances = 1 }
					}
					AND = {
						NOT = { gu_finances = 1 }
						NOT = { colony = 1 }
						OR = {
							current_age = age_of_discovery 
							current_age = age_of_reformation 
							current_age = age_of_absolutism
							current_age = age_of_revolutions
						}
					}

					OR = {
						current_age = age_of_discovery 
						AND = {
							current_age = age_of_reformation 
							NOT = { gu_finances = 1 }
						}

					}
					
				}

				religion_group = communism_group
	
				has_country_flag = estate_picked_scientists
				has_country_flag = estate_picked_miners
				has_country_flag = estate_picked_farmers
			}

			NOT = {	has_country_flag = estate_picked_investors }
		}

		hidden_effect = { country_event = { id = gmina_estates.2137 } }
	}
	#Investors can't 2
	option = {
		highlight = yes
		name = gmina_estates.2.d2
		custom_tooltip = gmina_estates.2.d2.tt

		trigger = {
			has_country_flag = estate_picked_investors 
		}

		hidden_effect = { country_event = { id = gmina_estates.2137 } }
	}
	option = {
		name = gmina_estates.2.e
		custom_tooltip = gmina_estates.2.e.tt
	}
}

country_event = {
	id = gmina_estates.3
	title = gmina_estates.3.title
	desc = gmina_estates.3.desc
	picture = MARCHING_PEASANTS_eventPicture
	
	is_triggered_only = yes
	
	#Retirees
	option = {
		name = gmina_estates.3.a
		custom_tooltip = gmina_estates.3.a.tt
	}
	#Banks
	option = {
		name = gmina_estates.3.b
		custom_tooltip = gmina_estates.3.b.tt
	}
	#Miners
	option = {
		name = gmina_estates.3.c
		custom_tooltip = gmina_estates.3.c.tt
	}
	#Scientists
	option = {
		name = gmina_estates.3.d
		custom_tooltip = gmina_estates.3.d.tt
	}	
	#Investors
	option = {
		name = gmina_estates.3.e
		custom_tooltip = gmina_estates.3.e.tt
	}
	#Priests
	option = {
		name = gmina_estates.3.f
		custom_tooltip = gmina_estates.3.f.tt
	}
	#Families	
	option = {
		name = gmina_estates.3.g
		custom_tooltip = gmina_estates.3.g.tt
	}
	#Farmers
	option = {
		name = gmina_estates.3.h
		custom_tooltip = gmina_estates.3.h.tt
	}
	#Middle Class
	option = {
		name = gmina_estates.3.i
		custom_tooltip = gmina_estates.3.i.tt
	}
	#Repression Apparatus
	option = {
		name = gmina_estates.3.j
		custom_tooltip = gmina_estates.3.j.tt
	}
	#Army
	option = {
		name = gmina_estates.3.k
		custom_tooltip = gmina_estates.3.k.tt
	}
	#Unemployed
	option = {
		name = gmina_estates.3.l
		custom_tooltip = gmina_estates.3.l.tt
	}
	#Exit
	option = {
		name = gmina_estates.3.m
	}
}


#Refresh window
country_event = {
	id = gmina_estates.2137
	title = gmina_estates.2137.t
	desc = gmina_estates.2137.d
	picture = MARCHING_PEASANTS_eventPicture
	
	is_triggered_only = yes
	hidden = yes
	
	option = {
		name = gmina_estates.2137.a
		country_event = { id = gmina_estates.2 }
	}	
}