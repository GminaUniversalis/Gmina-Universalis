namespace = clock

#year clock
country_event = {
    id = clock.1
	title = "clock.1.t"
	desc = "clock.1.d"
    is_triggered_only = yes
	hidden = yes
    
    immediate = {

        1500 = {
            change_variable = {
                which = clock_year
                value = 1
            }
        }

        clr_global_flag = clock_init_year
        set_global_flag = clock_init_year
        
    }

    option = {
        name = "clock.1.a"
    }
}

#month clock
country_event = {
    id = clock.3
	title = "clock.3.t"
	desc = "clock.3.d"
    is_triggered_only = yes
	hidden = yes
    
    immediate = {
        
        if = {
            limit = {
                1500 = {
                    check_variable = {
                        which = clock_month
                        value = 12
                    }
                }
                1500 = {
                    NOT = {
                        check_variable = {
                            which = clock_month
                            value = 13
                        }
                    }
                }
            }
            1500 = {
                subtract_variable = {
                    which = clock_month
                    value = 11
                }
            }
            # 1500 = { #redundancy for year progression
            #     change_variable = {
            #         which = clock_year 
            #         value = 1
            #     }
            # } 
            # clr_global_flag = clock_init_year
            # set_global_flag = clock_init_year
        }
        else_if = { #Redundancy
            limit = {
                1500 = {
                    check_variable = {
                        which = clock_month
                        value = 13
                    }
                }
                1500 = {
                    NOT = {
                        check_variable = {
                            which = clock_month
                            value = 14
                        }
                    }
                }

            }
            1500 = {
                subtract_variable = {
                    which = clock_month
                    value = 12
                }
            }

        }
        else = {
            1500 = {
                change_variable = {
                    which = clock_month
                    value = 1
                }
            }


        }
        
        clr_global_flag = clock_init_month
        set_global_flag = clock_init_month
        
    }

    option = {
        name = "clock.3.a"
    }
}

#on_startup
country_event = {
    id = clock.2
    title = "clock.2.t"
	desc = "clock.2.d"
    is_triggered_only = yes
	hidden = yes
    fire_only_once = yes

    immediate = {
        if = {
            limit = {
                start_date = 1444.11.11
            }
            set_global_flag = clock_init_year
            set_global_flag = clock_init_month
        }

        1500 = {
            set_variable = {
                which = clock_year
                value = 1969
            }
        }
        
        1500 = {
            set_variable = {
                which = clock_month
                value = 9
            }
        }

        random_province = {
            add_province_triggered_modifier = clock_ptm_1
        }
        random_province = {
            add_province_triggered_modifier = clock_ptm_2
        }
        random_province = {
            add_province_triggered_modifier = clock_ptm_3
        }
        random_province = {
            add_province_triggered_modifier = clock_ptm_4
        }
        random_province = {
            add_province_triggered_modifier = clock_ptm_5
        }
        random_province = {
            add_province_triggered_modifier = clock_ptm_6
        }
        random_province = {
            add_province_triggered_modifier = clock_ptm_7
        }
        random_province = {
            add_province_triggered_modifier = clock_ptm_8
        }
        random_province = {
            add_province_triggered_modifier = clock_ptm_9
        }
        random_province = {
            add_province_triggered_modifier = clock_ptm_10
        }
        random_province = {
            add_province_triggered_modifier = clock_ptm_11
        }
        random_province = {
            add_province_triggered_modifier = clock_ptm_12
        }

    }

    option = {

    }
}